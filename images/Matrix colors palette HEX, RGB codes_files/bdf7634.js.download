(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{374:function(t,e,r){"use strict";var n={name:"spinner"},o=r(8),component=Object(o.a)(n,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loader-wrapper"},[e("div",{staticClass:"loader"})])}],!1,null,null,null);e.a=component.exports},376:function(t,e,r){var n=r(97),o=r(70),l=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,m=/^0o[0-7]+$/i,f=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var r=d.test(t);return r||m.test(t)?f(t.slice(2),r?2:8):c.test(t)?NaN:+t}},392:function(t,e,r){var n=r(97),o=r(393),l=r(376),c=Math.max,d=Math.min;t.exports=function(t,e,r){var m,f,v,h,w,_,C=0,$=!1,x=!1,P=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function F(time){var e=m,r=f;return m=f=void 0,C=time,h=t.apply(r,e)}function I(time){return C=time,w=setTimeout(k,e),$?F(time):h}function y(time){var t=time-_;return void 0===_||t>=e||t<0||x&&time-C>=v}function k(){var time=o();if(y(time))return S(time);w=setTimeout(k,function(time){var t=e-(time-_);return x?d(t,v-(time-C)):t}(time))}function S(time){return w=void 0,P&&m?F(time):(m=f=void 0,h)}function E(){var time=o(),t=y(time);if(m=arguments,f=this,_=time,t){if(void 0===w)return I(_);if(x)return clearTimeout(w),w=setTimeout(k,e),F(_)}return void 0===w&&(w=setTimeout(k,e)),h}return e=l(e)||0,n(r)&&($=!!r.leading,v=(x="maxWait"in r)?c(l(r.maxWait)||0,e):v,P="trailing"in r?!!r.trailing:P),E.cancel=function(){void 0!==w&&clearTimeout(w),C=0,m=_=f=w=void 0},E.flush=function(){return void 0===w?h:S(o())},E}},393:function(t,e,r){var n=r(31);t.exports=function(){return n.Date.now()}},402:function(t,e,r){"use strict";var n=r(6),o={name:"social-login",methods:{oAuth:function(t){var e=n.a.apiUrl+"/login/".concat(t);window.open(e)}}},l=r(8),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-center"},[r("div",{staticClass:"mb-3 text-sm text-muted"},[t._v("\n        Social login\n      ")]),t._v(" "),r("nav",{staticClass:"social-login d-inline-block"},[r("a",{staticClass:"icon tw",attrs:{href:"#",title:"Sign in with Twitter"},on:{click:function(e){return e.preventDefault(),t.oAuth("twitter")}}},[r("i",{staticClass:"fa fa-twitter",attrs:{"aria-hidden":"true"}})]),t._v(" "),r("a",{staticClass:"icon gh",attrs:{href:"#",title:"Sign in with GitHub"},on:{click:function(e){return e.preventDefault(),t.oAuth("github")}}},[r("i",{staticClass:"fa fa-github",attrs:{"aria-hidden":"true"}})])])])}),[],!1,null,null,null);e.a=component.exports},519:function(t,e,r){"use strict";r.r(e);var n=r(24),o=r(374),l=r(392),c=r.n(l),d={name:"login",components:{spinner:o.a},data:function(){return{user:{email:"",password:""},singInForm:{},resetPasswordForm:{},isResetPassword:!1,singInFormLoading:!1}},beforeMount:function(){this.$route.query&&this.$route.query.token&&this.loginUser(this.$route.query.token)},methods:{resetPassword:function(){if(this.resetPasswordForm.$valid){var t=this;n.default.forgotPassword(this.user.email).then((function(data){t.alerts.show("Please check your email.","success")})).catch((function(e){t.alerts.show(e.message,"error")}))}},singIn:function(){this.loading=!0,this.singInForm.$valid&&this.signInWithPassword()},signInWithPassword:c()((function(){var t=this;this.singInFormLoading=!0,n.default.signInWithPassword({email:this.user.email,password:this.user.password}).then((function(e){e&&e.data.token?(t.loginUser(e.data.token),t.singInFormLoading=!1):t.alerts.show("Wrong credentials","error")})).catch((function(e){t.alerts.show(e.message,"error"),t.singInFormLoading=!1}))}),200),loginUser:function(t){var e=this;t||this.alerts.show("Please provide token","error"),this.alerts.show("Signed in successfully","success"),this.$store.dispatch("login"),this.$router.push({name:"palettes"}),localStorage.setItem("token",t),n.default.getProfile().then((function(t){e.$store.dispatch("set_user",t.data)}))},toggleResetPassword:function(){this.isResetPassword=!this.isResetPassword},fieldClassName:function(form,t){return t?form.$submitted&&form[t]&&(form[t].$touched||form[t].$submitted)&&form[t].$invalid?"is-invalid":void 0:""}}},m=r(8),f=Object(m.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.isResetPassword?r("div",[r("div",{staticClass:"form-wrapper mb-3"},[r("vue-form",{staticClass:"mb-3",attrs:{state:t.resetPasswordForm},on:{submit:function(e){return e.preventDefault(),t.resetPassword(e)}}},[r("validate",{staticClass:"form-group required-field",attrs:{"auto-label":""}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",class:t.fieldClassName(t.resetPasswordForm,"email"),attrs:{autocomplete:"username",type:"email",placeholder:"Email",name:"email",required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),t._v(" "),r("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit"}},[t._v("Reset Password")]),t._v(" "),t.resetPasswordForm.$submittedState&&t.resetPasswordForm.$submittedState.$invalid?r("div",{staticClass:"error-list text-center"},[r("field-messages",{attrs:{tag:"ul",state:t.resetPasswordForm.$submittedState,"auto-label":"",name:"email"}},[r("li",{attrs:{slot:"required"},slot:"required"},[r("label",[t._v(t._s(t.messages.requiredEmail))])]),t._v(" "),r("li",{attrs:{slot:"email"},slot:"email"},[r("label",[t._v(t._s(t.messages.invalidEmail))])])])],1):t._e()],1),t._v(" "),r("div",{staticClass:"text-center text-sm"},[r("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.toggleResetPassword(e)}}},[t._v("\n          Login\n        ")])])],1)]):r("div",[r("vue-form",{staticClass:"mb-3 form-wrapper",attrs:{state:t.singInForm},on:{submit:function(e){return e.preventDefault(),t.singIn(e)}}},[r("validate",{staticClass:"form-group required-field",attrs:{"auto-label":""}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",class:t.fieldClassName(t.singInForm,"email"),attrs:{autocomplete:"username",type:"email",placeholder:"Email",name:"email",required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),t._v(" "),r("validate",{staticClass:"form-group required-field",attrs:{"auto-label":""}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",class:t.fieldClassName(t.singInForm,"password"),attrs:{type:"password",autocomplete:"current-password",id:"password",placeholder:"Password",name:"password",minlength:"5",maxlength:"20",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),t._v(" "),r("div",{staticClass:"loader-wrapper-sm"},[t.singInFormLoading?r("spinner"):r("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit"}},[t._v("Login")])],1),t._v(" "),t.singInForm.$submittedState&&t.singInForm.$submittedState.$invalid?r("div",{staticClass:"error-list text-center"},[r("field-messages",{attrs:{tag:"ul",state:t.singInForm.$submittedState,"auto-label":"",name:"email"}},[r("li",{attrs:{slot:"required"},slot:"required"},[r("label",[t._v(t._s(t.messages.requiredEmail))])]),t._v(" "),r("li",{attrs:{slot:"email"},slot:"email"},[r("label",[t._v(t._s(t.messages.invalidEmail))])])]),t._v(" "),r("field-messages",{attrs:{tag:"ul",state:t.singInForm.$submittedState,"auto-label":"",name:"password"}},[r("li",{attrs:{slot:"required"},slot:"required"},[r("label",[t._v(t._s(t.messages.requiredFieldPassword))])])])],1):t._e(),t._v(" "),r("div",{staticClass:"text-center text-sm login-btns mt-3"},[r("a",{staticClass:"px-1",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.toggleResetPassword(e)}}},[t._v("\n            Forgot password?\n          ")])])],1),t._v(" "),r("div",{staticClass:"form-wrapper text-center text-sm"},[t._v("\n       Don't have an account? "),r("router-link",{staticClass:"px-1",attrs:{to:"/sign-up",tag:"a"}},[t._v("Sign up")])],1)],1)])}),[],!1,null,null,null).exports,v=r(402),h=r(27),w={components:{LoginForm:f,SocialLogin:v.a},head:{title:"Login | ColorsWall"},computed:Object(h.b)(["isAuth"]),watch:{isAuth:function(t,e){!e&&t&&this.$router.push({name:"palettes"})}}},_=Object(m.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"full-height"},[e("div",{staticClass:"alert alert-info text-center alert-fixed"},[this._v("\n    Haven't account yet? "),e("router-link",{attrs:{to:"/sign-up",tag:"a"}},[this._v("Sign Up")])],1),this._v(" "),e("div",{staticClass:"d-flex h-100 w-100"},[e("div",{staticClass:"align-self-center m-auto"},[e("login-form"),this._v(" "),e("social-login")],1)])])}),[],!1,null,null,null);e.default=_.exports}}]);